<div class="cart">

    <div class="container-title mt-3">
      <h2 [style.color]="theme.get('colorTextSecondary')" [style.background]="theme.get('backgroundSec')" class="chip title-cart">Mi carrito</h2>
    </div>

    <ul class="p-list">
      <div *ngFor="let i of itemsCart" class="cart-item">
        <div class="container-image">
          <img src="{{ i.productImage }}" alt="p Image" />
        </div>
        <div class="cart-item-details">
          <h3 class="title-item">{{ i.name }}</h3>

          <div class="user-options">
            <div *ngIf="i.userOptions[0] !== null" class="container-options">
              <div *ngFor="let o of i.userOptions" class="option">
                
                <div *ngIf="o.multiple else simple">
                  <p class="detail-item">
                    <b>-{{o.nameVariation}}: </b> 
                    <span style="display: inline-block; margin-right: 3px;" *ngFor="let m of o.multipleOptions; index as i; ">
                      {{i === o.multipleOptions!.length - 1 ? m.nameOption :  m.nameOption + ',' }}
                    </span>
                  </p>
                </div>
                <ng-template #simple>
                  <p class="detail-item">
                    <b>{{o.typePrice === 1 ? '' : o.nameVariation + ': '}}</b>
                    <span>{{o.nameOption}}</span>
                  </p>
                </ng-template>

              </div>
            </div>
            <p class="detail-item"><b>Precio:</b> {{ i.total ? (i.total * i.quantity|currency) : (i.productPrice|currency) }}</p>
          
          </div>




          <div class="quantity">
            <i
              (click)="setQuantity(i.idCart, -1, inputQuantity.value)"
              class="fa-solid fa-minus"
              [style.borderColor]="theme.get('background')"
            ></i>
            <input
              disabled
              [id]="i.idCart"
              #inputQuantity
              type="number"
              [value]="i.quantity"
            />
            <i
              (click)="setQuantity(i.idCart, 1, inputQuantity.value)"
              class="fa-solid fa-plus"
              [style.borderColor]="theme.get('background')"
            ></i>
          </div>
          
        </div>

        <button class="remove-item" (click)="removeProduct(i.idCart)">
            <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    </ul>

    <div *ngIf="itemsCart.length !== 0">

        <div class="subtotal">
          <span>Subtotal:</span>
          <span class="subtotal-value">{{ subtotal | currency }}</span>
        </div>
  
        <div class="buttons">
          <button class="button-clear" (click)="clearCart()">
            Vaciar carrito
          </button>
          <a [routerLink]="['checkout']">
              <button
                [style.background]="theme.get('background')"
                [style.color]="theme.get('colorTextSecondary')"
                class="button-checkout"
              >
                Checkout
              </button>

          </a>
        </div>
    </div>







    <!-- CART EMPTYYYYYY-->
    <div *ngIf="subtotal === 0" [@fadeIn] class="empty-cart">
      <h2>Parece que no hay productos en tu carrito :( </h2>
      <i class="fa-solid fa-cart-plus"></i>
      <div>
          <a  [routerLink]="'/'+[routeService.getOrigin()]" >
          <button [style.background]="theme.get('background')" [style.color]="theme.get('colorTextSecondary')">
              Ir al inicio
          </button>
      
      </a>

      </div>
    </div>
  </div>