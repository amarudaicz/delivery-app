<div class="card data-local">
  <h3 class="title">Datos del local</h3>

  <span class="edit-btn" (click)="editing ? saveDataLocal() : editDataLocal()">

    <p-button [disabled]="processForm" [icon]="editing && processForm ? 'pi pi-spin pi-spinner' : ( editing ? 'pi pi-save' : 'fa-solid fa-pen-to-square')" [label]="editing ? 'Guardar' : 'editar'">

    </p-button>
  </span>

  <div class="container-form-local">
    <form [formGroup]="form">
      <div class="container-form-field">
        <mat-form-field class="m-1 input-field">
          <mat-label> Nombre </mat-label>
          <input matInput formControlName="name" type="text" />
        </mat-form-field>

        <mat-form-field class="m-1 input-field">
          <mat-label> Telefono </mat-label>

          <input matInput formControlName="phone" type="number" />
        </mat-form-field>

        <mat-form-field class="m-1 input-field">
          <mat-label> Direccion </mat-label>
          <input matInput formControlName="location" type="text" />
        </mat-form-field>
      </div>

      <div class="aditional-info">
        <div class="container-horarios container-data-local" [class.disable-form]="form.disabled">
          <h4>Horarios</h4>
          <form [formGroup]="horariosForm">
            <div class="list-week">
              <span>
                <mat-form-field appearance="fill">
                  <mat-label>Dias</mat-label>
                  <mat-select formControlName="daysWeek" multiple>
                    <mat-option *ngFor="let day of ['Lun', 'Mar', 'Mie', 'Jue', 'Vie']" [value]="day">{{day}}</mat-option>
                  </mat-select>
                  <mat-error>Este campo es requerido</mat-error>
                </mat-form-field>

                
                <span class="mb-2 d-block" style="margin-top: -15px;">
                  <i class="pi pi-sun mr-2 icon-horarios"></i>
                  <input
                    type="text"
                    formControlName="semanaMañanaInicio"
                    class="input-horarios"
                  />
                  -
                  <input
                    type="text"
                    formControlName="semanaMañanaFin"
                    class="input-horarios"
                  />
  
                  <i class="pi pi-moon mr-2 icon-horarios"></i>
                  <input
                    type="text"
                    formControlName="semanaTardeInicio"
                    class="input-horarios"
                  />
                  -
                  <input
                    type="text"
                    formControlName="semanaTardeFin"
                    class="input-horarios"
                  />
                </span>
              </span>

              <p class="alert-form alert-local" 
              *ngIf="horariosForm.get('semanaMañanaInicio')?.invalid || 
              horariosForm.get('semanaMañanaFin')?.invalid ||
              horariosForm.get('semanaTardeInicio')?.invalid ||
              horariosForm.get('semanaTardeFin')?.invalid  "><i class="pi pi-info-circle"></i>Ingresar horas en formato am - pm</p>
              

              
              <span class="mt-3 d-block" >
                <div>
                  <mat-form-field appearance="fill">
                    <mat-label>Dias</mat-label>
                    <mat-select formControlName="daysWeekend" multiple>
                      <mat-option *ngFor="let day of ['Sáb', 'Dom']" [value]="day">{{day}}</mat-option>
                    </mat-select>
                    <mat-error>Este campo es requerido</mat-error>
                  </mat-form-field>
                </div>

                <span class="d-block" style="margin-top: -15px;">
                  <i class="pi pi-sun mr-2 icon-horarios"></i>
                  <input
                    type="text"
                    formControlName="finDeSemanaMañanaInicio"
                    class="input-horarios"
                  />
                  -
                  <input
                    type="text"
                    formControlName="finDeSemanaMañanaFin"
                    class="input-horarios"
                  />
  
                  <i class="pi pi-moon mr-2 icon-horarios"></i>
                  <input
                    type="text"
                    formControlName="finDeSemanaTardeInicio"
                    class="input-horarios"
                  />
                  -
                  <input
                    type="text"
                    formControlName="finDeSemanaTardeFin"
                    class="input-horarios"
                  />
                  
                  <p class="alert-form alert-local" 
                  *ngIf="horariosForm.get('finDeSemanaMañanaInicio')?.invalid || 
                  horariosForm.get('finDeSemanaMañanaFin')?.invalid ||
                  horariosForm.get('finDeSemanaTardeInicio')?.invalid ||
                  horariosForm.get('finDeSemanaTardeFin')?.invalid  "><i class="pi pi-info-circle"></i>Ingresar horas en formato am - pm</p>
                </span>
                </span>


            </div>
          </form>
        </div>

        <div class="container-redes container-data-local" [class.disable-form]="form.disabled">
          <h4>Enlaces</h4>
          <span class="alert-aditionals alert-local"> <i class="pi pi-info-circle"></i> Pegar direccion de enlace  </span>

          <ul class="list-redes">
            <li>
              <i class="pi pi-instagram mr-2"></i>
              <h5 class="title-red">Instagram</h5>
              <input formControlName="instagram" type="text" class="input-redes">
              <a  *ngIf="form.get('instagram')?.value" target="_blank" class="ml-2" [href]="form.get('instagram')?.value"><i class="pi pi-external-link"></i></a>


            </li>

            <li>
              <i class="pi pi-globe mr-2"></i>
              <h5 class="title-red">Sitio Web</h5>
              <input formControlName="website" type="text" class="input-redes">
              <a *ngIf="form.get('website')?.value"  target="_blank" class="ml-2" [href]="form.get('website')?.value"><i class="pi pi-external-link"></i></a>

            </li>

            <li>
                <i class="pi pi-map-marker mr-2"></i>
                <h5 class="title-red">Google Maps</h5>
                <input formControlName="maps" type="text" class="input-redes">
                <a *ngIf="form.get('maps')?.value"  target="_blank" class="ml-2" [href]="form.get('maps')?.value"><i class="pi pi-external-link"></i></a>
              </li>
          </ul>
        </div>

        <div class="container-delivery-local container-data-local">
          <h4>Envios</h4>
          
          <mat-checkbox class="" color="primary" formControlName="delivery">
            Delivery
          </mat-checkbox>
          <mat-checkbox class="" color="primary" formControlName="pickLocal">
            Retiro en local
          </mat-checkbox>
          <div *ngIf="form.get('delivery')?.value">
            <div class="d-block">
              <h5 class="d-inline">Costo delivery aprox</h5>
              <input formControlName="delivery_cost" class="ml-1 w-2 p-1" type="number">$
            </div>

            <div class="d-block mt-1">
              <h5 class="d-inline">Tiempo delivery aprox</h5>
              <input matInput formControlName="delivery_time" class="ml-1 w-3 p-1" type="text"> min
              <p class="alert-form alert-local"  
              *ngIf="form.get('delivery_time')?.invalid">Indicar aproximado de la forma 20 - 30</p>
            </div>
          </div>




        </div>


        <div class="container-image-local container-data-local">
          <h4>Logo</h4>

          <div class="mt-2 text-center" >
            <p-fileUpload  [disabled]="!editing" *ngIf="!previewImageLocal" chooseIcon="pi pi-upload" (uploadHandler)="uploadImage($event)" [auto]="true" #inputImage [customUpload]="true" chooseLabel="Imagen" mode="basic" accept="image/*" [maxFileSize]="1000000">
            </p-fileUpload>
          </div>

          <img [src]="previewImageLocal" width="250px" alt="">
          <div *ngIf="previewImageLocal && editing" class="button-remove-image-local">
            <p-button  icon="pi pi-times" class="button-remove-image" (click)="removePreviewImage()" ></p-button>
          </div>
        </div>


        <div class="container-pay-methods container-data-local">
          <h4>Metodos de pago</h4>

          <ul class="list-pay-methods list-redes">
            <li *ngFor="let item of [
            {icon:'pi-sort-alt', label:'Transferencia',control:'transfer', data:'aliascbu'}]">
              <i [ngClass]="['pi','mr-2', item.icon]"></i>
              <h5 class="title-red">{{item.label}}</h5>
              <mat-checkbox color="primary" class="ml-2" [formControlName]="item.control"></mat-checkbox>
              <input *ngIf="form.get('transfer')?.value" type="text" class="p-1" placeholder="Alias o CBU" [formControlName]="item.data">
            </li>

            
          </ul>

        </div>
      </div>
    </form>
  </div>
</div>

<p-toast></p-toast>
