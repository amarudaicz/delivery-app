<div class="login-container">


    <div [@fadeIn] *ngIf="errorResponse" class="container-errors">
        {{errorResponse}}
    </div>

    
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="container-form">
            <div class="form-group" *ngIf="register" >
                <div class="input-login-group" [ngClass]="getError('email') ? 'invalid' : '' " >
                    <label for="email"><i class="icon-login fa-solid fa-envelope"></i></label>
                    <input type="email" placeholder="Email" class="input-login" formControlName="email" id="email">
                </div>
                <div *ngIf="getError('email')">
                  <div class="error-form" *ngIf="getError('email')">Ingrese su email.</div>
                </div>
            </div>

         <div class="form-group">
            <div class="input-login-group" [ngClass]="getError('username') ? 'invalid' : ' ' " >
                <label for="username"><i class="icon-login fa-solid fa-user"></i></label>
                <input type="text" placeholder="Usuario" class="input-login" formControlName="username" id="username">
            </div>
            <div *ngIf="getError('username')">
              <div class="error-form" *ngIf="getError('username')">Ingrese su nombre de usuario.</div>
            </div>
          </div>
          <div class="form-group">
            <div class="input-login-group" [ngClass]="getError('password') ? 'invalid' : ' '">
                <label for="password"><i class="icon-login fa-solid fa-key"></i></label>
                <input [type]="showPassword ? 'text' : 'password'" placeholder="Contraseña" class="input-login" formControlName="password" id="password">
                <span>
                    <i matRipple [ngClass]="['icon-show-pass', 'pi', showPassword ? 'pi-eye-slash' : 'pi-eye']" (click)="showPassword = !showPassword"></i>
                </span>
            </div>
            <div>
              <div *ngIf="getError('password', 'minlength')" class="error-form" >Su contraseña debe tener 8 caracteres como minimo.</div>
              <div *ngIf="getError('password', 'required')" class="error-form" >Ingrese su contraseña.</div>
            </div>
          </div>
          <div *ngIf="!register" class="lost-pass">
            <a class="link-login">Olvido su contraseña?</a> 
          </div>

          <div class="form-group"  *ngIf="register" >
            <div class="input-login-group" [ngClass]="[getError('repeatPassword') ? 'invalid' : '', comparePassword() ? 'invalid' : ''] " >
                <label for="repeatPassword"><i class="icon-login fa-solid fa-key"></i></label>
                <input type="password" placeholder="Repita su contraseña" class="input-login" formControlName="repeatPassword" id="repeatPassword">
            </div>
            <div>
              <div class="error-form" *ngIf="getError('repeatPassword')">Repita su contraseña.</div>
              <div class="error-form" *ngIf="comparePassword()">Las contraseñas no coinciden.</div>
            </div>
        </div>




        </div>

        <button [disabled]="formSubmitted" class="submit-btn shadow-3" type="submit">
            <span *ngIf="!formSubmitted">
                {{register ? 'Registrarse' : 'Acceso' }}
            </span>
            <i *ngIf="formSubmitted" class="pi pi-spin pi-spinner"></i>
        </button>

        </form>


</div>
