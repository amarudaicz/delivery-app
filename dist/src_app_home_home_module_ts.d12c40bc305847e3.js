"use strict";(self.webpackChunkapp_delivery_ng=self.webpackChunkapp_delivery_ng||[]).push([["src_app_home_home_module_ts"],{8961:(N,I,c)=>{c.r(I),c.d(I,{HomeModule:()=>v});var a=c(4042),C=c(7047),t=c(2560),u=c(3630),p=c(3662),l=c(3242),s=c(4666),A=c(408),g=c(2508),Q=c(8987);class h{constructor(o){this.http=o}getVotes(o,e){return this.http.get(`localhost:3001/vote/${e}/${o}`)}addVote(o,e,r,i){return this.http.post("localhost:3001/vote",{user_id:o,product_id:e,stars:r,local:i})}}h.\u0275fac=function(o){return new(o||h)(t.LFG(Q.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});class _{constructor(o){this.routeData=o,this.favorites=[];const e=localStorage.getItem("favorites");e&&(this.favorites=JSON.parse(e))}toogleFavorite(o){const e={...o,local:this.routeData.getOrigin()};if(console.log(e),console.log(this.favorites),o&&!this.isProductInFavorites(e))0===this.favorites.length&&localStorage.setItem("favorites",JSON.stringify([e])),this.favorites.push(e),localStorage.setItem("favorites",JSON.stringify(this.favorites));else if(e){console.log(e),console.log(this.favorites);const r=this.favorites.findIndex(i=>i.id===e.id&&i.local===e.local);console.log(r),this.favorites.splice(r,1),localStorage.setItem("favorites",JSON.stringify(this.favorites))}}isProductInFavorites(o){return this.favorites.some(e=>e.id===o.id&&e.local===o.local)}compareFavorite(o){return this.favorites.some(e=>e.id===o.id&&e.local===o.local)}getFavorites(){return this.favorites}}_.\u0275fac=function(o){return new(o||_)(t.LFG(p.N))},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});var Y=c(2712);class y{transform(o){let e=1/0;const r=o.variations?.findIndex(i=>1===i.typePrice);if(!r||-1===r)return null;for(const i of o.variations[r].options)i.price<e&&i.active&&(e=i.price);return e===1/0?null:e}}function q(n,o){if(1&n&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.product.description," ")}}function L(n,o){if(1&n&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.product.ingredients.join(", "))}}function B(n,o){if(1&n&&(t.TgZ(0,"div",13),t._uU(1," Desde "),t.TgZ(2,"span",14),t._uU(3),t.ALo(4,"currency"),t.ALo(5,"lowestPrice"),t.qZA(),t._UZ(6,"i",15),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,1,t.lcZ(5,3,e.product))," ")}}function E(n,o){if(1&n&&(t.TgZ(0,"div",16)(1,"span",17),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,1,e.product.price))}}function z(n,o){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t._UZ(3,"img",6),t.qZA(),t.TgZ(4,"div",7)(5,"span",8),t._uU(6),t.qZA(),t.YNc(7,q,2,1,"span",9),t.YNc(8,L,2,1,"span",9),t.YNc(9,B,7,5,"div",10),t.ALo(10,"lowestPrice"),t.YNc(11,E,4,3,"ng-template",null,11,t.W1O),t.qZA()()()),2&n){const e=t.MAs(12),r=t.oxw();t.xp6(3),t.s9C("src",r.product.image,t.LSH),t.xp6(3),t.Oqu(r.product.name),t.xp6(1),t.Q6J("ngIf",!(null!=r.product.ingredients&&r.product.ingredients.length)),t.xp6(1),t.Q6J("ngIf",r.product.ingredients),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,6,r.product))("ngIfElse",e)}}function H(n,o){1&n&&t._UZ(0,"p-skeleton",18)(1,"p-skeleton",19)(2,"p-skeleton",20)}y.\u0275fac=function(o){return new(o||y)},y.\u0275pipe=t.Yjl({name:"lowestPrice",type:y,pure:!0});const j=function(n){return[n]},D=function(n){return{id:n}};class f{constructor(o,e,r,i,d,k){this.theme=o,this.localService=e,this.formBuilder=r,this.ratingService=i,this.routeData=d,this.favService=k}ngOnInit(){}getOptionWithLowestPrice(o){let e=1/0;const r=o.variations?.findIndex(i=>1===i.typePrice);if(-1===r)return 0;for(const i of o.variations[r].options)i.price<e&&i.active&&(e=i.price);return console.log(e),e===1/0?0:e}}f.\u0275fac=function(o){return new(o||f)(t.Y36(u.O),t.Y36(l.T),t.Y36(g.qu),t.Y36(h),t.Y36(p.N),t.Y36(_))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-product-card"]],inputs:{product:"product",linkMode:"linkMode"},decls:4,vars:8,consts:[[1,"",3,"routerLink","queryParams"],["class","product-card border-round bg-white shadow-3",4,"ngIf","ngIfElse"],["loader",""],[1,"product-card","border-round","bg-white","shadow-3"],[1,"flex","flex-row","gap-3"],[1,"product-image"],["alt","",1,"border-round",3,"src"],[1,"product-info","flex","flex-column","w-full","h-full"],[1,"product-name","mb-1","text-base"],["class","product-ingredients",4,"ngIf"],["class","mt-2 text-base product-price",4,"ngIf","ngIfElse"],["singlePrice",""],[1,"product-ingredients"],[1,"mt-2","text-base","product-price"],[1,"font-bold"],[1,"pi"],[1,"container-price","mt-2"],[1,"product-price","font-bold","text-base"],["width","100%","height","130px","borderRadius","15px","styleClass","mb-2"],["styleClass","mb-2","borderRadius","5px"],["width","50%","styleClass","mb-2","borderRadius","5px"]],template:function(o,e){if(1&o&&(t.TgZ(0,"a",0),t.YNc(1,z,13,8,"div",1),t.qZA(),t.YNc(2,H,3,0,"ng-template",null,2,t.W1O)),2&o){const r=t.MAs(3);t.Q6J("routerLink",t.VKq(4,j,"name"===e.linkMode?e.product.name:(null==e.product.category_name?null:e.product.category_name.toLowerCase())+"/"+e.product.name))("queryParams",t.VKq(6,D,e.product.id)),t.xp6(1),t.Q6J("ngIf",e.product.id)("ngIfElse",r)}},dependencies:[s.O5,a.rH,Y.O,s.H9,y],styles:[".product-card[_ngcontent-%COMP%]{scroll-snap-align:start;width:100%;height:112px;max-height:112px;padding:12px}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{max-width:75px;height:75px}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:cover;box-shadow:0 4px 10px -7px #000}.product-card[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-card[_ngcontent-%COMP%]   .product-ingredients[_ngcontent-%COMP%]{font-size:12px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{color:#232323}"]});const R=function(n,o){return{background:n,color:o}};function G(n,o){if(1&n&&(t.TgZ(0,"h2",7),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngStyle",t.WLB(2,R,e.theme.get("background"),e.theme.get("colorTextSecondary"))),t.xp6(1),t.hij(" ",e.products[0].category_name," ")}}function X(n,o){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"app-product-card",9),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("linkMode","name")("product",e)}}class b{constructor(o,e,r,i){this.theme=o,this.localService=e,this.route=r,this.routeService=i}ngOnInit(){}backHome(){this.route.navigate([this.routeService.getOrigin()])}}function $(n,o){1&n&&t._UZ(0,"app-loader-full")}function K(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-products-by-category",4),t.qZA()),2&n){const e=t.oxw();t.Q6J("@fadeIn",void 0),t.xp6(1),t.Q6J("products",e.products)}}b.\u0275fac=function(o){return new(o||b)(t.Y36(u.O),t.Y36(l.T),t.Y36(a.F0),t.Y36(p.N))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-products-by-category"]],inputs:{products:"products"},decls:8,vars:2,consts:[[1,""],[1,"d-flex","gap-2"],[1,"chip","border-round","bg-bluegray-800","cursor-pointer","hover:bg-black-alpha-90",3,"click"],[1,"pi","pi-chevron-left","text-white",2,"margin-top","2px"],["class","chip my-3 w-full",3,"ngStyle",4,"ngIf"],[1,"flex","justify-content-center","gap-3","wrap"],["class","w-full md:w-5",4,"ngFor","ngForOf"],[1,"chip","my-3","w-full",3,"ngStyle"],[1,"w-full","md:w-5"],[3,"linkMode","product"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0)(1,"div",0)(2,"div",1)(3,"button",2),t.NdJ("click",function(){return e.backHome()}),t._UZ(4,"i",3),t.qZA(),t.YNc(5,G,2,5,"h2",4),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,X,2,2,"div",6),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("ngIf",e.products),t.xp6(2),t.Q6J("ngForOf",e.products))},dependencies:[s.sg,s.O5,s.PC,f]});class w{constructor(o,e,r,i){this.theme=o,this.routeService=e,this.localService=r,this.route=i,this.category="",this.category=this.route.snapshot.params.category,scrollTo(0,0)}ngOnInit(){this.routeService.setCurrent("categories"),console.log(this.route.snapshot.url),this.localService.initDataLocal(this.route.snapshot.url[0].path),this.localService.getProducts().subscribe(o=>{console.log(o),o.length&&(this.products=o.filter(e=>e.category_name.toLowerCase()===this.category))})}}w.\u0275fac=function(o){return new(o||w)(t.Y36(u.O),t.Y36(p.N),t.Y36(l.T),t.Y36(a.gz))},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-main-category"]],decls:5,vars:2,consts:[[1,"container"],[1,"content"],[1,""],[4,"ngIf"],[3,"products"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,$,1,0,"app-loader-full",3),t.YNc(4,K,2,2,"div",3),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",!e.products),t.xp6(1),t.Q6J("ngIf",e.products))},dependencies:[s.O5,A.i,b],styles:[".container[_ngcontent-%COMP%]{height:auto}"],data:{animation:[C.J]}});var J=c(2856),V=c(8817),W=c(8701),U=c(4489),F=c(207);const tt=function(n){return{"background-image":n}};function et(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.emitCategory(d.category,i))}),t.TgZ(1,"h5",3),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.Udp("background-image","url("+e.category.image+")")("border-color",e.selectedCategory(e.category.id)?e.theme.get("background"):"#000000d1"),t.Q6J("matRippleColor","#00000012")("ngStyle",t.VKq(11,tt,e.category.image)),t.xp6(1),t.Udp("background",e.selectedCategory(e.category.id)?e.theme.get("background"):"#000000d1")("color",e.selectedCategory(e.category.id)?e.theme.get("colorTextSecondary"):""),t.xp6(1),t.hij(" ",e.category.name," ")}}function ot(n,o){1&n&&t._UZ(0,"p-skeleton",4)}class P{constructor(o,e){this.theme=o,this.previewCategory=e}ngOnInit(){}emitCategory(o,e){this.previewCategory.setCategory(o.id),e.target.scrollIntoView()}selectedCategory(o){return this.previewCategory.category_id===o}ngOnDestroy(){}}function nt(n,o){if(1&n&&t._UZ(0,"div"),2&n){const e=o.$implicit,r=t.oxw();t.Gre("circle btn-arrow circle-",e,""),t.Udp("background",r.theme.get("background"))}}P.\u0275fac=function(o){return new(o||P)(t.Y36(u.O),t.Y36(U.F))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-card-category"]],inputs:{category:"category"},decls:3,vars:2,consts:[["matRipple","","class","category-card border-round-2xl shadow-3 border-2",3,"background-image","border-color","matRippleColor","ngStyle","click",4,"ngIf","ngIfElse"],["loader",""],["matRipple","",1,"category-card","border-round-2xl","shadow-3","border-2",3,"matRippleColor","ngStyle","click"],[1,"card-title","w-full"],["size","100px","borderRadius","30px"]],template:function(o,e){if(1&o&&(t.YNc(0,et,3,13,"div",0),t.YNc(1,ot,1,0,"ng-template",null,1,t.W1O)),2&o){const r=t.MAs(2);t.Q6J("ngIf",e.category)("ngIfElse",r)}},dependencies:[s.O5,s.PC,F.wG,Y.O],styles:[".container-card[_ngcontent-%COMP%]{scroll-snap-align:flex-start}.category-card[_ngcontent-%COMP%]{width:185px;height:100px;display:flex;justify-content:start;align-items:end;padding:10px;background-position:center;background-size:cover;background-repeat:no-repeat}.card-title[_ngcontent-%COMP%]{padding:5px;border-radius:5px;background:rgba(0,0,0,.4666666667);text-align:center;color:#fff;line-break:loose;white-space:nowrap}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:15px}.post[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:106px;border-radius:30px;background-image:linear-gradient(90deg,#ddd 0px,#e8e8e8 40px,#ddd 80px);background-size:600px;animation:_ngcontent-%COMP%_shine-avatar 1.6s infinite linear}.post[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{float:left;width:140px;height:16px;margin-top:12px;border-radius:7px;background-image:linear-gradient(90deg,#ddd 0px,#e8e8e8 40px,#ddd 80px);background-size:600px;animation:_ngcontent-%COMP%_shine-lines 1.6s infinite linear}.post[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%] + .line[_ngcontent-%COMP%]{margin-top:11px;width:100px}.post[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%] ~ .line[_ngcontent-%COMP%]{background-color:#ddd}@keyframes _ngcontent-%COMP%_shine-lines{0%{background-position:-100px}40%,to{background-position:140px}}@keyframes _ngcontent-%COMP%_shine-avatar{0%{background-position:-32px}40%,to{background-position:208px}}"]});const rt=function(){return[1,2,3,4]};class O{constructor(o,e){this.theme=o,this.pwaInstaller=e}ngOnInit(){}install(){this.pwaInstaller.canInstall()&&this.pwaInstaller.promptInstall()}setPromt(o){}}function it(n,o){if(1&n&&(t.TgZ(0,"a",7)(1,"span",8),t._uU(2," Lista "),t._UZ(3,"i",9),t.qZA()()),2&n){const e=t.oxw();t.Udp("color",e.theme.get("backgroundSec")),t.Q6J("routerLink",e.title.toLowerCase())}}function ct(n,o){if(1&n&&t._UZ(0,"app-product-card",10),2&n){const e=o.$implicit;t.Udp("width","100%"),t.Q6J("linkMode","category-name")("product",e)}}O.\u0275fac=function(o){return new(o||O)(t.Y36(u.O),t.Y36(J.I))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-newselter-box"]],decls:12,vars:2,consts:[[1,"container-newselter","border-round-2xl","mt-3",3,"click"],[1,"container-text"],["src","./assets/logos/logo-de.png","width","50px","alt","",1,"logo-newselter"],[1,"title-newselter"],[2,"font-size","12px"],[1,"arrow-wrapper"],[1,"btn-arrow"],["matRipple","",1,"pi-download","pi","arrow"],[3,"background","class",4,"ngFor","ngForOf"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return e.install()}),t.TgZ(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"h4",3),t._uU(4," Descarga nuestra aplicaci\xf3n "),t._UZ(5,"br"),t.TgZ(6,"span",4),t._uU(7,"Ofertas exclusivas y mas"),t.qZA()(),t.TgZ(8,"div",5)(9,"button",6),t._UZ(10,"i",7),t.qZA()()(),t.YNc(11,nt,1,5,"div",8),t.qZA()),2&o&&(t.xp6(11),t.Q6J("ngForOf",t.DdM(1,rt)))},dependencies:[s.sg,F.wG],styles:[".container-newselter[_ngcontent-%COMP%]{width:100%;height:auto;background:#ffffff;position:relative;padding:16px;box-shadow:0 2px 20px -3px #4a4a4a;overflow:hidden}.container-newselter[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%}.container-newselter[_ngcontent-%COMP%]   .circle-1[_ngcontent-%COMP%]{width:80px;height:80px;bottom:0;right:-33px}.container-newselter[_ngcontent-%COMP%]   .circle-2[_ngcontent-%COMP%]{width:40px;height:40px;bottom:-17px;left:-10px}.container-newselter[_ngcontent-%COMP%]   .circle-3[_ngcontent-%COMP%]{width:45px;height:45px;right:3px;top:-15px}.container-newselter[_ngcontent-%COMP%]   .circle-4[_ngcontent-%COMP%]{width:45px;height:45px;right:3px;bottom:-15px}.container-text[_ngcontent-%COMP%]{text-align:center;color:#fff;display:flex;justify-content:space-between;align-items:center;gap:10px}.container-text[_ngcontent-%COMP%]   .title-newselter[_ngcontent-%COMP%]{font-size:14px;z-index:5;color:#1d2334}.arrow-wrapper[_ngcontent-%COMP%]{z-index:5;width:50px}.arrow-wrapper[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{font-size:22px;padding:5px;margin-right:-32px;color:#fff;border-radius:50%}"]});class M{constructor(o,e){this.theme=o,this.localService=e,this.title=""}ngOnInit(){}}function at(n,o){if(1&n&&t._UZ(0,"app-products-set",1),2&n){const e=t.oxw();t.Q6J("title",null==e.products[0]?null:e.products[0].category_name)("products",e.products)}}M.\u0275fac=function(o){return new(o||M)(t.Y36(u.O),t.Y36(l.T))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-products-set"]],inputs:{products:"products",title:"title"},decls:8,vars:3,consts:[[1,"products-set","mt-3"],[1,"container-chip","mb-2"],[1,"title"],["class","link-category py-1 px-2 border-1 border-round",3,"color","routerLink",4,"ngIf"],[1,"container-products"],[1,"container-grid","mb-3"],[3,"linkMode","width","product",4,"ngFor","ngForOf"],[1,"link-category","py-1","px-2","border-1","border-round",3,"routerLink"],[1,"d-flex","gap-2"],[1,"pi","pi-arrow-right"],[3,"linkMode","product"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h2",2),t._uU(3),t.qZA(),t.YNc(4,it,4,3,"a",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t.YNc(7,ct,1,4,"app-product-card",6),t.qZA()()()),2&o&&(t.xp6(3),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",e.title),t.xp6(3),t.Q6J("ngForOf",e.products))},dependencies:[s.sg,s.O5,f,a.rH],styles:[".product-card[_ngcontent-%COMP%]{scroll-snap-align:start;width:100%;height:112px;max-height:112px;padding:12px}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{max-width:75px;height:75px}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:cover;box-shadow:0 4px 10px -7px #000}.product-card[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-card[_ngcontent-%COMP%]   .product-ingredients[_ngcontent-%COMP%]{font-size:12px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{color:#232323}.products-set[_ngcontent-%COMP%]{position:relative}.container-chip[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.link-category[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.container-products[_ngcontent-%COMP%]{overflow-x:scroll;scroll-snap-type:x proximity}.container-grid[_ngcontent-%COMP%]{display:grid;grid-auto-columns:100%;grid-template-rows:repeat(2,max-content);gap:16px;grid-auto-flow:column;place-items:center}@media (min-width: 576px){.container-grid[_ngcontent-%COMP%]{grid-auto-columns:auto}}"]});class T{constructor(o){this.previewCategory=o,this.products=[1,2,3,4]}ngOnInit(){console.log(this.previewCategory.category_id),this.previewCategory.productsByCategory.subscribe(o=>{o.length&&(this.products=o)})}ngOnDestroy(){}}T.\u0275fac=function(o){return new(o||T)(t.Y36(U.F))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-preview-category"]],decls:1,vars:1,consts:[[3,"title","products",4,"ngIf"],[3,"title","products"]],template:function(o,e){1&o&&t.YNc(0,at,1,2,"app-products-set",0),2&o&&t.Q6J("ngIf",e.products)},dependencies:[s.O5,M]});var m=c(4851);function st(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeSearch())}),t._UZ(1,"i",14),t.qZA()}}function lt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearFilterPrices())}),t._uU(1,"Limpiar"),t.qZA()}if(2&n){const e=t.oxw(2);t.Udp("background",e.theme.get("backgroundSec"))}}function pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){const d=t.CHM(e).$implicit,k=t.oxw(2);return t.KtG(k.toogleTag(d))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,r=t.oxw(2);t.Udp("background",r.theme.get("background")),t.ekj("bg-green-500",r.filters.tags.includes(e))("fadeinleft",r.filters.tags.includes(e)),t.xp6(1),t.hij(" ",e," ")}}function dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearTags())}),t._uU(1,"Limpiar"),t.qZA()}if(2&n){const e=t.oxw(2);t.Udp("background",e.theme.get("backgroundSec"))}}function ut(n,o){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),t._uU(4,"Precio"),t.qZA(),t.TgZ(5,"div",19),t._UZ(6,"input",20)(7,"input",21),t.YNc(8,lt,2,2,"button",22),t.qZA()(),t.TgZ(9,"div",23)(10,"span",18),t._uU(11,"Filtros"),t.qZA(),t.TgZ(12,"div",24),t.YNc(13,pt,2,7,"button",25),t.qZA(),t.YNc(14,dt,2,2,"button",26),t.qZA()()()),2&n){const e=t.oxw();let r;t.Q6J("@fadeIn",void 0),t.xp6(8),t.Q6J("ngIf",(null==(r=e.formSearch.get("minPrice"))?null:r.value)||(null==(r=e.formSearch.get("maxPrice"))?null:r.value)),t.xp6(5),t.Q6J("ngForOf",e.allTags),t.xp6(1),t.Q6J("ngIf",e.filters.tags.length)}}function gt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"h4",34),t._uU(2,"No se encontraron resultados..."),t.qZA(),t.TgZ(3,"button",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeSearch())}),t._uU(4," Volver atras "),t.qZA()()}}function ft(n,o){1&n&&t._UZ(0,"app-product-card",40),2&n&&t.Q6J("product",o.$implicit)}function mt(n,o){if(1&n&&(t.TgZ(0,"div",36)(1,"h3",37),t._uU(2),t.qZA(),t.TgZ(3,"div",38),t.YNc(4,ft,1,1,"app-product-card",39),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngForOf",e.products)}}function ht(n,o){if(1&n&&(t.TgZ(0,"div",30),t.YNc(1,gt,5,0,"div",31),t.YNc(2,mt,5,2,"div",32),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e.groupedProducts&&e.groupedProducts.length)),t.xp6(1),t.Q6J("ngForOf",e.groupedProducts)}}const _t=function(){return["fixed-search","overflow-auto"]},xt=function(){return["fixed-input","p-3","relative bg-gray-400 top-0 left-0"]};class Z{constructor(o,e,r){this.fb=o,this.theme=e,this.localService=r,this.fixedSearch=!1,this.activeFilters=!1,this.filters={minPrice:0,maxPrice:0,tags:[]},this.allTags=[],this.visibleFilters=!1,this.formSearch=this.fb.group({query:[null],maxPrice:[null],minPrice:[null],pulse:[null]}),this.getAll(),console.log(this.formSearch),this.subscriptionForm()}getAll(){this.localService.getProducts().subscribe(o=>{this.allProducts=o,this.groupedProducts=this.groupByCategories(o),o.forEach(e=>{e.ingredients.forEach(r=>{this.allTags.includes(r)||(this.allTags.push(r),console.log(this.allTags))})})})}subscriptionForm(){this.formSearch.valueChanges.subscribe(o=>{let{minPrice:e,maxPrice:r,query:i}=o;console.log(o),this.fixedSearch=!0,this.filtredProducts=this.filterByQuery(i),console.log(this.filtredProducts),(e||r)&&(this.filtredProducts=this.filterByPrice(this.filtredProducts)),this.filters.tags.length&&(this.filtredProducts=this.filterByTags(this.filtredProducts)),console.log(this.filtredProducts),this.groupedProducts=this.groupByCategories(this.filtredProducts),console.log(this.groupedProducts)})}groupByCategories(o){const e=[];return o.forEach(r=>{const i=e.findIndex(d=>d.name===r.category_name);-1!==i?e[i].products.push(r):e.push({name:r.category_name,products:[r]})}),e}filterByQuery(o){if(!o)return this.allProducts;const e=o?.toLowerCase();return this.allProducts.filter(i=>i.name.toLowerCase().includes(e)||i.category_name.toLowerCase().includes(e))}filterByPrice(o){let{minPrice:e,maxPrice:r}=this.formSearch.value;return console.log(e,r),e&&r?o.filter(i=>i.price>=e&&i.price<=r):e?o.filter(i=>i.price>=e):r?o.filter(i=>i.price<=r):o}toogleFilters(){this.fixedSearch||(this.fixedSearch=!0),this.activeFilters=!0,this.visibleFilters=!this.visibleFilters}closeSearch(){this.formSearch.reset(),this.filters.tags=[],this.activeFilters=!1,this.visibleFilters=!1,this.groupedProducts=void 0,this.fixedSearch=!1,this.groupedProducts=this.groupByCategories(this.allProducts)}toogleTag(o){this.filters.tags.includes(o)?(this.filters.tags.splice(this.filters.tags.indexOf(o),1),this.allTags.splice(this.allTags.indexOf(o),1),this.allTags.push(o)):(this.filters.tags.push(o),this.allTags.splice(this.allTags.indexOf(o),1),this.allTags.unshift(o)),this.formSearch.get("pulse")?.setValue(!0)}filterByTags(o){return o.filter(e=>this.filters.tags.some(r=>e.ingredients.includes(r)))}clearFilterPrices(){this.formSearch.get("maxPrice")?.reset(),this.formSearch.get("minPrice")?.reset()}clearTags(){this.filters.tags=[],this.formSearch.get("pulse")?.reset(!0)}}function vt(n,o){1&n&&t._UZ(0,"app-newselter-box")}function Ct(n,o){1&n&&t._UZ(0,"app-card-category",11),2&n&&t.Q6J("category",o.$implicit)}Z.\u0275fac=function(o){return new(o||Z)(t.Y36(g.qu),t.Y36(u.O),t.Y36(l.T))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-search-products"]],decls:13,vars:12,consts:[[3,"ngClass"],[1,"w-full","input-search",3,"ngClass"],[3,"formGroup"],[1,"flex","flex-column"],[1,"d-flex","gap-2","w-full"],[1,"relative","flex-1","p-3"],[1,"pi","pi-search","icon-search","text-800","relative","z-1"],["formControlName","query","placeholder","Buscar productos","type","text",1,"w-full","text-base","absolute","w-full","h-full","top-0","left-0","pl-6","pr-2","border-none","border-round-xl","font-bold"],["type","button","mat-ripple","",1,"border-1","border-transparent","flex","p-3","border-round-xl",3,"click"],[1,"pi","pi-sliders-v","text-white"],["type","button","class","border-1 border-transparent flex p-3 border-round-xl bg-gray-200",3,"click",4,"ngIf"],["class","w-full",4,"ngIf"],["class","p-3  flex flex-column w-full gap-2",4,"ngIf"],["type","button",1,"border-1","border-transparent","flex","p-3","border-round-xl","bg-gray-200",3,"click"],[1,"pi","pi-times","text-800"],[1,"w-full"],[1,"pt-2"],[1,"mb-2"],[1,"text-base","font-semibold"],[1,"d-flex","gap-2","mt-1"],["placeholder","M\xe1ximo","formControlName","maxPrice","type","number",1,"w-full","text-base","md:max-w-8rem","border-none","py-3","p-2","bg-gray-200","border-round-xl"],["placeholder","M\xednimo","formControlName","minPrice","type","number",1,"w-full","text-sm","md:max-w-8rem","border-none","py-3","p-2","bg-gray-200","border-round-xl"],["class","w-fit text-sm font-bold text-white md:max-w-8rem border-none py-3 p-2 border-round-xl",3,"background","click",4,"ngIf"],[1,"pb-3"],[1,"flex","wrap","gap-1","overflow-auto","mt-1"],["class","p-2 border-round text-white flex-1 text-nowrap  text-overflow-elipsis max-w-10rem",3,"bg-green-500","fadeinleft","background","click",4,"ngFor","ngForOf"],["class","w-fit text-sm font-bold text-white md:max-w-8rem border-none  mt-2 p-2 border-round-xl",3,"background","click",4,"ngIf"],[1,"w-fit","text-sm","font-bold","text-white","md:max-w-8rem","border-none","py-3","p-2","border-round-xl",3,"click"],[1,"p-2","border-round","text-white","flex-1","text-nowrap","text-overflow-elipsis","max-w-10rem",3,"click"],[1,"w-fit","text-sm","font-bold","text-white","md:max-w-8rem","border-none","mt-2","p-2","border-round-xl",3,"click"],[1,"p-3","flex","flex-column","w-full","gap-2"],["class","text-center w-full pt-4",4,"ngIf"],["class","",4,"ngFor","ngForOf"],[1,"text-center","w-full","pt-4"],[1,"text-xl"],[1,"text-semibold","underline","mt-3",3,"click"],[1,""],[1,"mb-2","mt-1","text-semibold","text-2xl"],[1,"flex","flex-column","w-full","gap-2"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"i",6)(7,"input",7),t.qZA(),t.TgZ(8,"button",8),t.NdJ("click",function(){return e.toogleFilters()}),t._UZ(9,"i",9),t.qZA(),t.YNc(10,st,2,0,"button",10),t.qZA(),t.YNc(11,ut,15,4,"div",11),t.qZA()()(),t.YNc(12,ht,3,2,"div",12),t.qZA()),2&o&&(t.Q6J("ngClass",e.fixedSearch?t.DdM(10,_t):"pt-3"),t.xp6(1),t.Q6J("ngClass",e.fixedSearch?t.DdM(11,xt):"sticky"),t.xp6(1),t.Q6J("formGroup",e.formSearch),t.xp6(5),t.ekj("bg-gray-200",e.fixedSearch),t.xp6(1),t.Udp("background",e.theme.get("backgroundSec")),t.xp6(2),t.Q6J("ngIf",e.fixedSearch),t.xp6(1),t.Q6J("ngIf",e.visibleFilters),t.xp6(1),t.Q6J("ngIf",e.fixedSearch))},dependencies:[s.mk,s.sg,s.O5,f,F.wG,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.sg,g.u],styles:['.icon-search[_ngcontent-%COMP%]{font-size:18px}.fixed-search[_ngcontent-%COMP%]{width:100%;height:calc(100% - 58px);background:#fff;z-index:8888;position:fixed;top:0;left:0}.input-search.fixed-input[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:20px;-webkit-backdrop-filter:saturate(72%) blur(3px);backdrop-filter:saturate(72%) blur(3px);background:none;left:0;bottom:-10px}.grid-tags[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:1fr 1fr;grid-template-columns:1fr;grid-template-rows:1fr 1fr;gap:10px;grid-template-areas:"." "."}'],data:{animation:[C.J,(0,m.X$)("moveAnimation",[(0,m.eR)(":enter",[(0,m.oB)({transform:"translateY(-100%)"}),(0,m.jt)("0.5s")]),(0,m.eR)(":leave",[(0,m.jt)("0.5s",(0,m.oB)({transform:"translateY(-100%)"}))])])]}});const yt=function(){return[1,2,3,4]};function bt(n,o){if(1&n&&(t.TgZ(0,"div",9),t.YNc(1,Ct,1,1,"app-card-category",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.categories||t.DdM(1,yt))}}function wt(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t.YNc(3,vt,1,0,"app-newselter-box",5),t._UZ(4,"app-search-products"),t.TgZ(5,"section",6)(6,"h2",7),t._uU(7,"Categor\xedas"),t.qZA(),t.YNc(8,bt,2,2,"div",8),t.qZA(),t._UZ(9,"app-preview-category"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.appInstalled),t.xp6(5),t.Q6J("ngIf",e.categories)}}function Pt(n,o){1&n&&t._UZ(0,"app-loader-full")}class S{constructor(o,e,r,i,d,k,Zt){this.theme=o,this.routeService=e,this.localService=r,this.pwaInstaller=i,this.route=d,this.layoutStateService=k,this.cartService=Zt,this.appInstalled=this.pwaInstaller.isPwaMode(),this.local=null,this.themeLoaded=!1,this.layoutStateService.state.header=!0,this.layoutStateService.state.navigation=!0,this.layoutStateService.updateState()}ngOnInit(){this.routeService.setCurrent("home"),this.local=this.route.snapshot.params.local,this.localService.initDataLocal(this.local),this.local!==this.routeService.getOrigin()&&this.cartService.clearCart(),this.localService.categories$.subscribe(o=>{o.length&&(this.categories=o)}),this.theme.getThemeState().subscribe(o=>this.themeLoaded=o)}ngOnDestroy(){this.layoutStateService.state.menuMobile=!1,this.layoutStateService.updateState()}}S.\u0275fac=function(o){return new(o||S)(t.Y36(u.O),t.Y36(p.N),t.Y36(l.T),t.Y36(J.I),t.Y36(a.gz),t.Y36(V.m),t.Y36(W.N))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-main-home"]],features:[t._Bn([])],decls:3,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["loader",""],[1,"container"],[1,"content"],[1,""],[4,"ngIf"],[1,"categories","mt-3"],[1,"title","mb-2"],["class","container-categories py-2",4,"ngIf"],[1,"container-categories","py-2"],[3,"category",4,"ngFor","ngForOf"],[3,"category"]],template:function(o,e){if(1&o&&(t.YNc(0,wt,10,2,"div",0),t.YNc(1,Pt,1,0,"ng-template",null,1,t.W1O)),2&o){const r=t.MAs(2);t.Q6J("ngIf",e.themeLoaded)("ngIfElse",r)}},dependencies:[s.sg,s.O5,A.i,P,O,T,Z],styles:[".container[_ngcontent-%COMP%]{height:auto}.categories[_ngcontent-%COMP%]   .container-categories[_ngcontent-%COMP%]{scroll-snap-type:x mandatory;display:flex;overflow-x:scroll;column-gap:20px}.categories[_ngcontent-%COMP%]   .container-categories[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories[_ngcontent-%COMP%]   .container-show-more[_ngcontent-%COMP%]{text-align:end;padding:5px 0 0}.categories[_ngcontent-%COMP%]   .container-show-more[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#525252;text-decoration:underline}"],data:{animation:[C.J]}});const Ot=[{path:":local",component:S,data:{animation:"home",page:"home"}},{path:":local/:category",component:w,data:{page:""}}];class x{}x.\u0275fac=function(o){return new(o||x)},x.\u0275mod=t.oAB({type:x}),x.\u0275inj=t.cJS({imports:[a.Bz.forChild(Ot),a.Bz]});var Mt=c(4466),Tt=c(930);class v{}v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[s.ez,Mt.m,x,a.Bz,Tt.ZX,F.si,Y.m,g.u5,g.UX]})},408:(N,I,c)=>{c.d(I,{i:()=>t});var a=c(2560),C=c(3630);class t{constructor(p){this.themeService=p}ngOnInit(){this.theme=this.themeService.getTheme(1)}}t.\u0275fac=function(p){return new(p||t)(a.Y36(C.O))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-loader-full"]],decls:5,vars:6,consts:[[1,"container-loader"],[1,"lds-ripple"]],template:function(p,l){1&p&&(a.TgZ(0,"div",0)(1,"div",1),a._UZ(2,"div")(3,"div")(4,"div"),a.qZA()()),2&p&&(a.xp6(2),a.Udp("border-color",null==l.theme?null:l.theme.background),a.xp6(1),a.Udp("border-color",null==l.theme?null:l.theme.background),a.xp6(1),a.Udp("border-color",null==l.theme?null:l.theme.background))},styles:[".container-loader[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:grid;place-items:center}.lds-ripple[_ngcontent-%COMP%]{display:inline-block;position:relative;width:60px;height:60px}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;border:3px solid;opacity:1;border-radius:50%;animation:_ngcontent-%COMP%_lds-ripple 1s cubic-bezier(0,.2,.8,1) infinite}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.6s}@keyframes _ngcontent-%COMP%_lds-ripple{0%{top:30px;left:30px;width:0;height:0;opacity:0}4.9%{top:30px;left:30px;width:0;height:0;opacity:0}5%{top:30px;left:30px;width:0;height:0;opacity:1}to{top:0;left:0;width:60px;height:60px;opacity:0}}"]})}}]);
//# sourceMappingURL=src_app_home_home_module_ts.d12c40bc305847e3.js.map