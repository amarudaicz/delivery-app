{"version":3,"file":"src_app_cart_cart_module_ts.64e0393df8643edd.js","mappings":"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","names":["i0","_r9","CartItemsComponent","constructor","cartService","theme","routeService","location","toast","this","ngOnInit","setCurrent","items$","getCartItems","subscribe","items","console","log","itemsCart","subtotal","length","map","e","total","quantity","reduce","prev","act","clearCart","removeProduct","id","product","find","i","idCart","open","name","duration","onAction","accept","removeFromCart","setQuantity","number","currentValue","target","value","Number","updateQuantity","ngOnDestroy","unsubscribe","parseInt","a","core","selectors","ctx","fadeIn","WpService","localService","local$","local","encodeText","cart","userData","categories","category_name","filter","elemento","indice","indexOf","forEach","cat","index","products","toUpperCase","Intl","NumberFormat","style","currency","format","readUserOptions","userOptions","trim","especifications","text","genIdOrder","payMethod","shippingMethod","amountReceived","formatNumber","direction","encodedText","encodeURIComponent","replace","clearMessage","generarMensaje","categoriesRead","locationUser","ubication","mensaje","pay_methods","transfer","nameAccount","cbu","alias","entity","formatUbicationName","address","reference","position","lat","lng","includes","push","getOptionType1","nameOption","costShipping","typePrice","multiple","nameVariation","multiples","multipleOptions","price","toLocaleUpperCase","o","codigo","caracteres","longitud","charAt","Math","floor","random","redirectWp","phone","window","streetName","streetNumber","localName","countrySecondarySubdivision","countrySubdivision","country","n","minimumFractionDigits","factory","CheckoutComponent","formBuilder","userService","wpService","matDialog","snackBar","tomtom","getUser","cartItems","p","c","form","group","Validators","minValueValidator","defineCostShipping","setLocalConfig","setFormStates","setErrorsMessage","control","controls","hasError","formChange","saveUserShipping","preLeave","isFormInvalid","formSubmitted","markAllAsTouched","redirectWhatsapp","ubicationUser","postSale","getSessionLocal","payMethods","shippingMethods","shipping","cash","get","addValidators","delivery","pick_in_local","getDirection","query","_this","directionIsChange","suggestions","undefined","previusDirection","previusStreetNumber","invalid","panelSuggestions","getSuggestions","results","onBlurDirection","setTimeout","selectDirection","suggestion","calculateRoute","route","distanceToShipping","MetersToKilometers","routes","summary","lengthInMeters","calculateShippingCost","cordsUser","displayMapView","loadMap","_this2","getMap","on","event","lngLat","currentMarker","remove","addMarker","navControl","NavigationControl","showZoom","showPitch","addControl","removeUbication","saveMarker","cords","getLngLat","reverseSearch","then","res","addresses","selectShippingMethod","method","setValue","selectPayMethod","valueChanges","setValidators","clearValidators","updateValueAndValidity","isInputIvalid","input","touched","enableDirectionInputs","enable","showAlerts","MainCartComponent","layoutState","themes","state","header","navigation","updateState","path","component","data","animation","page","children","RoutesCartRoutingModule","RouterModule","CartModule","MatRippleModule","CommonModule","MatInputModule","MatSelectModule","FormsModule","ReactiveFormsModule","MatDialogModule","MatTooltipModule","MatSnackBarModule","MatCheckboxModule"],"sourceRoot":"webpack:///","sources":["./src/app/cart/cart-items/cart-items.component.html","./src/app/cart/cart-items/cart-items.component.ts","./src/app/services/wpService/wp.service.ts","./src/app/cart/checkout/checkout.component.html","./src/app/cart/checkout/checkout.component.ts","./src/app/cart/main-cart/main-cart.component.html","./src/app/cart/main-cart/main-cart.component.ts","./src/app/cart/routes-cart-routing.module.ts","./src/app/cart/cart.module.ts"],"sourcesContent":["<div class=\"cart h-full\">\r\n\r\n    <div class=\"container-title px-2 py-3 d-flex gap-2\">\r\n      <button (click)=\"location.back()\" matRipple class=\"chip cursor-pointer border-round bg-bluegray-800 cursor-pointer hover:bg-black-alpha-90\">\r\n        <i class=\"pi pi-chevron-left text-white\" style=\"margin-top: 2px;\"></i>\r\n      </button>\r\n  \r\n      <h2 [style.color]=\"theme.get('colorTextSecondary')\" [style.background]=\"theme.get('backgroundSec')\" class=\"chip w-full\">Mi carrito</h2>\r\n    </div>\r\n\r\n\r\n    <div class=\"overflow-auto px-2\" *ngIf=\"itemsCart.length; else cartEmpty\">\r\n      <ul class=\"p-list\">\r\n        <div *ngFor=\"let i of itemsCart\" class=\"cart-item bg-white shadow-1\">\r\n          <div class=\"container-image\">\r\n            <img src=\"{{ i.productImage }}\" alt=\"p Image\" />\r\n          </div>\r\n          <div class=\"cart-item-details\">\r\n            <div class=\"d-flex justify-content-between\">\r\n              <h3 class=\"title-item\">{{ i.name }}</h3>\r\n               <button class=\"\" (click)=\"removeProduct(i.idCart)\">\r\n                <i class=\"pi pi-trash text-red-400 text-xl\"></i>\r\n              </button> \r\n            </div>\r\n  \r\n            <div class=\"user-options\">\r\n              <div *ngIf=\"i.userOptions[0] !== null\" class=\"container-options\">\r\n                <div *ngFor=\"let o of i.userOptions\" class=\"option\">\r\n                  \r\n                  <div *ngIf=\"o.multiple else simple\">\r\n                    <p class=\"detail-item\">\r\n                      <b>-{{o.nameVariation}}: </b> \r\n                      <span style=\"display: inline-block; margin-right: 3px;\" *ngFor=\"let m of o.multipleOptions; index as i; \">\r\n                        {{i === o.multipleOptions!.length - 1 ? m.nameOption :  m.nameOption + ',' }}\r\n                      </span>\r\n                    </p>\r\n                  </div>\r\n                  <ng-template #simple>\r\n                    <p class=\"detail-item\">\r\n                      <b>{{o.typePrice === 1 ? '' : o.nameVariation + ': '}}</b>\r\n                      <span>{{o.nameOption}}</span>\r\n                    </p>\r\n                  </ng-template>\r\n  \r\n                </div>\r\n              </div>\r\n              <p class=\"detail-item\"><b>Precio:</b> {{ i.total ? (i.total * i.quantity|currency) : (i.productPrice|currency) }}</p>\r\n            \r\n            </div>\r\n  \r\n            <div class=\"quantity\">\r\n              <button>\r\n                <i\r\n                  (click)=\"setQuantity(i.idCart, -1, inputQuantity.value)\"\r\n                  class=\"fa-solid fa-minus cursor-pointer  border-2 border-round p-2 font-bold\"\r\n                  [style.borderColor]=\"theme.get('background')\"\r\n                ></i>\r\n              </button>\r\n              <input\r\n              (change)=\"setQuantity(i.idCart, $event, inputQuantity.value)\"\r\n                class=\" cursor-pointer w-3rem border-2 border-round p-2 text-center font-bold\"\r\n                [id]=\"i.idCart\"\r\n                min=\"1\"\r\n                #inputQuantity\r\n                type=\"number\"\r\n                [value]=\"i.quantity\"\r\n              />\r\n              <button>\r\n                <i\r\n                  (click)=\"setQuantity(i.idCart, 1, inputQuantity.value)\"\r\n                  class=\"fa-solid fa-plus cursor-pointer  border-2 border-round  p-2 font-bold\"\r\n                  [style.borderColor]=\"theme.get('background')\"\r\n                ></i>\r\n              </button>\r\n            </div>\r\n            <span class=\"text-red-600 text-sm\" *ngIf=\"parseInt(inputQuantity.value) < 1\">Ingrese una cantidad valida</span>\r\n            \r\n          </div>\r\n  \r\n         \r\n        </div>\r\n      </ul>\r\n    </div>\r\n\r\n    <div *ngIf=\"itemsCart.length; else btnGoHome\" class=\"mt-3 p-2 pb-3\">\r\n\r\n        <div class=\"subtotal relative py-1 px-3 \">\r\n          <span class=\"font-bold text-base\">Subtotal:</span>\r\n          <span class=\"subtotal-value text-xl font-bold\">{{ subtotal | currency }}</span>\r\n        </div>\r\n  \r\n        <div class=\"buttons font-bold\">\r\n          <button matRipple class=\"button-clear cursor-pointer\" (click)=\"clearCart()\">\r\n            Vaciar carrito\r\n          </button>\r\n          <a matRipple [routerLink]=\"['checkout']\"       \r\n          [style.background]=\"theme.get('background')\"\r\n          [style.color]=\"theme.get('colorTextSecondary')\"\r\n          class=\"button-checkout cursor-pointer\">\r\n                Checkout\r\n          </a>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <!-- CART EMPTYYYYYY-->\r\n    <ng-template #btnGoHome>\r\n      <div class=\"w-full h-full p-2 pb-3\">\r\n        <a matRipple class=\"text-center py-2 w-full border-round mt-4 text-white text-base font-bold block\" \r\n        [routerLink]=\"'/'+[routeService.getOrigin()]\" \r\n        [style.background]=\"theme.get('background')\" >\r\n              Ir al inicio\r\n        </a>\r\n      </div>\r\n    </ng-template>\r\n\r\n    <ng-template #cartEmpty>\r\n      <div class=\"empty-cart\">\r\n        <h2 class=\"mb-3 text-xl\">Tu carrito esta vacío</h2>\r\n        <i class=\"fa-solid fa-cart-plus\"></i>\r\n      </div>\r\n    </ng-template>\r\n","import { Location } from '@angular/common';\r\nimport { Component, OnDestroy } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Navigation } from '@angular/router';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { fadeIn } from 'src/app/animations/main-detail-animations';\r\nimport { ItemCart } from 'src/app/interfaces/itemCart-interfaz';\r\nimport { Product } from 'src/app/interfaces/product-interface';\r\nimport { CartService } from 'src/app/services/cartData/cart.service';\r\nimport { RouteDataService } from 'src/app/services/routeData/route-data-service.service';\r\nimport { ThemesService } from 'src/app/services/themes/themes.service';\r\nimport { deleteRepeatElement } from 'src/app/utils/deleteRepeatElement';\r\n\r\n@Component({\r\n  selector: 'app-cart-items',\r\n  templateUrl: './cart-items.component.html',\r\n  styleUrls: ['./cart-items.component.scss'],\r\n  animations:[\r\n    fadeIn\r\n  ]\r\n})\r\nexport class CartItemsComponent implements OnDestroy {\r\n  subtotal = 0;\r\n  itemsCart:any[]=[]\r\n  items$?:Subscription\r\n  constructor(\r\n    public cartService: CartService, \r\n    public theme: ThemesService, \r\n    public routeService:RouteDataService,\r\n    public location:Location,\r\n    private toast:MatSnackBar) {\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.routeService.setCurrent('cart')\r\n\r\n    \r\n\r\n    \r\n    this.items$ = this.cartService.getCartItems().subscribe((items) => {\r\n      console.log(items);\r\n      this.itemsCart = items\r\n      \r\n      if (items.length === 0) {\r\n        this.subtotal = 0\r\n        return\r\n      }\r\n      \r\n      this.subtotal = items.map(e => e.total*e.quantity).reduce((prev, act)=>prev + act)\r\n      \r\n    });\r\n  }\r\n\r\n  clearCart() {\r\n    this.subtotal = 0;\r\n    this.cartService.clearCart()\r\n  }\r\n\r\n\r\n  // This method removes a product from the cart and updates the subtotal\r\n  removeProduct(id: number) {\r\n\r\n    const product = this.itemsCart.find(i => i.idCart === id)\r\n\r\n    console.log(product);\r\n    \r\n    const refAlert = this.toast.open(`Quiere eliminar el producto ${product.name}?`, 'Eliminar', {duration:3000})\r\n\r\n    refAlert.onAction().subscribe(accept=>{\r\n      this.cartService.removeFromCart(id)\r\n      console.log(this.subtotal);\r\n    })\r\n  }\r\n\r\n  setQuantity(id: number, number: any, currentValue: any) {\r\n    console.log(number.target?.value, typeof(number.target?.value));\r\n\r\n    if (Number(currentValue) === 1 && number < 1 || Number(number.target?.value) < 1) {\r\n      this.removeProduct(id)\r\n      return\r\n    }\r\n\r\n    if (number.target?.value) {\r\n      this.cartService.updateQuantity(id, Number(number.target.value));\r\n      return\r\n    }\r\n\r\n    console.log(currentValue, number);\r\n    \r\n    number = this.itemsCart.find(i=>i.idCart === id).quantity + number\r\n    this.cartService.updateQuantity(id, number);\r\n  }\r\n\r\n\r\n  ngOnDestroy(): void {\r\n    console.log('------------------------------');\r\n    console.log('------------------------------');\r\n    console.log('DESTROY');\r\n    console.log('------------------------------');\r\n    console.log('------------------------------');\r\n    \r\n    if (this.items$) {\r\n      this.items$?.unsubscribe()\r\n    }\r\n  }\r\n\r\n  parseInt(a:string){\r\n    return parseInt(a)\r\n  } \r\n}","import { Injectable } from '@angular/core';\r\nimport { FuzzySearchResponse, FuzzySearchResult } from '@tomtom-international/web-sdk-services';\r\nimport { OptionProduct } from 'src/app/interfaces/optionProduct-interface';\r\nimport { ProductCart } from 'src/app/interfaces/product-interface';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { LocalDataService } from '../localData/local-data.service';\r\nimport { Local } from 'src/app/interfaces/local-interface';\r\ninterface Item {\r\n  name: string;\r\n  productPrice: number;\r\n  especifications: string;\r\n  options: string;\r\n  category_name: string;\r\n  quantity: number;\r\n  total:number;\r\n  userOptions:Array<any>\r\n}\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class WpService {\r\n  constructor(private localService:LocalDataService) {\r\n      this.localService.local$.subscribe(local=>{\r\n        this.local = local\r\n      })\r\n\r\n  }\r\n  local?:Local\r\n  products: string = '';\r\n\r\n\r\n  \r\n  encodeText(cart: any[], userData: any, subtotal: number) {\r\n    const categories = cart.map((e) => e.category_name);\r\n\r\n    \r\n    const cleanCategories = categories.filter((elemento, indice) => {\r\n      return categories.indexOf(elemento) === indice;\r\n    });\r\n\r\n\r\n    cleanCategories.forEach((cat) => {\r\n    const categoryItems: Item[] = cart.filter((e) => e.category_name === cat);\r\n\r\n\r\n\r\n    categoryItems.forEach((e: Item, index: number) => {\r\nthis.products += `${index === 0 ? e.category_name.toUpperCase()+`\r\n---------\r\n`: ''}X${e.quantity} ${e.name} ${Intl.NumberFormat('es-AR', {style:'currency', currency:'ARS'}).format(e.total)}\r\n${this.readUserOptions(e.userOptions).trim()}\\n\r\n${e.especifications !== '' ? `Especificaciones: ${e.especifications}` : ''}`}); \r\n});\r\n\r\nconst text: string = `\r\n*Hola, te envio el resumen de mi compra*\r\n\r\n*Pedido*: ${this.genIdOrder()} \r\n*Nombre*: ${userData.name}\r\n\r\n*Forma de pago*: ${userData.payMethod}\r\n*Total*: $${subtotal}.00 ${userData.shippingMethod === 'Delivery'?'+ ENVIO':''}\r\n${userData.shippingMethod === 'Delivery' && userData.amountReceived ? `*Pago con*: ${this.formatNumber(userData.amountReceived)}` : ''}\r\n\r\n*Entrega*: ${userData.shippingMethod}\r\n${userData.shippingMethod === 'Delivery' ? \r\n`*Dirección*: ${userData.direction}`: ' '}\r\n\r\n*Mi compra es*:\r\n\r\n${this.products}\r\n\r\n*Espero tu respuesta para confirmar mi pedido*`;\r\n\r\nconsole.log(text);\r\nconst encodedText = encodeURIComponent(text).replace(/%0A/g, '%0A%20');\r\n\r\nthis.clearMessage()\r\nreturn encodedText\r\n}\r\n\r\n// {name:string, payMethod:string}\r\ngenerarMensaje(cart:any[], userData:any , subtotal: number) {\r\n  console.log(userData);\r\n  const categoriesRead:any[] = []\r\n\r\n  const locationUser = userData.ubication\r\n  \r\n  let mensaje = `*¡Hola!, te envío el resumen de mi compra*\\n\\n`;\r\n\r\n  mensaje += `*Pedido*: ${this.genIdOrder()}\\n`\r\n  mensaje += `*Nombre*: ${userData.name}\\n\\n`;\r\n\r\n  mensaje += `*---------------------------*\\n`;\r\n  userData.payMethod ? mensaje += `*Forma de pago*: ${userData.payMethod}\\n` : null;\r\n  mensaje += `*Total*: ${this.formatNumber(subtotal)}\\n`;\r\n  userData.amountReceived ? mensaje += `*Pago con*: ${this.formatNumber(userData.amountReceived)} \\n` : '';\r\n  mensaje += userData.payMethod === 'Transferencia' ?`*Datos de transferencia*:\\n _${this.local?.pay_methods.transfer.nameAccount}_\\n _CBU: ${this.local?.pay_methods.transfer.cbu}_\\n _Alias: ${this.local?.pay_methods.transfer.alias}_\\n _${this.local?.pay_methods.transfer.entity}_\\n\\n` : ''\r\n  mensaje += `*---------------------------*\\n\\n`;\r\n\r\n\r\n  userData.shippingMethod ? mensaje += `*Entrega*: ${userData.shippingMethod}\\n` : null;\r\n\r\n  if (userData.shippingMethod === 'Envio a domicilio'){\r\n      mensaje += `*Dirección*: ${this.formatUbicationName(userData, locationUser.address)}\\n` \r\n      userData.reference ?  mensaje += `*Referencia*: ${userData.reference}\\n` : null \r\n      mensaje += `*Ubicacion:* https://www.google.com/maps/place/${locationUser.position.lat},${locationUser.position.lng}\\n\\n`\r\n  }\r\n  \r\n  mensaje += `_Mi compra es_:\\n\\n`; \r\n\r\n  cart.forEach((product, i) => {\r\n    if (!categoriesRead.includes(product.category_name)) {\r\n      mensaje += `*${product.category_name.toUpperCase()}*\\n`;\r\n      mensaje += `*---------------*\\n`;\r\n      categoriesRead.push(product.category_name)\r\n    }\r\n\r\n    mensaje += `x${product.quantity} *${product.name.toUpperCase()}${this.getOptionType1(product) ? ` (${this.getOptionType1(product)?.nameOption?.toUpperCase()})` : ''}:* ${this.formatNumber(product.total)}\\n`;\r\n    if (!product.userOptions.length) {\r\n      mensaje += `\\n`;\r\n      return\r\n    }\r\n    mensaje += `${this.readUserOptions(product.userOptions)}\\n\\n`\r\n  });\r\n\r\n  mensaje += `\\n*TOTAL: ${this.formatNumber(subtotal)}${userData.shippingMethod === 'Delivery' ? ' *' : ''}*\\n`\r\n  mensaje += !userData.costShipping && userData.shippingMethod === 'Envio a domicilio' ? `_Costo de envío a definir de acuerdo a distancia_\\n\\n` : '\\n'\r\n\r\n  mensaje += `_Espero tu respuesta para confirmar mi pedido_`;\r\n\r\n  const encodedText = encodeURIComponent(mensaje).replace(/%0A/g, '%0A%20');\r\n  \r\n  console.log(mensaje);\r\n  return encodedText\r\n}\r\n\r\n\r\nreadUserOptions(userOptions:OptionProduct[]){\r\n  let text:any = ''\r\n  \r\n  userOptions.forEach(e =>{\r\n    if (e.typePrice===1) {\r\n      return\r\n    }\r\n\r\n    if (!e.multiple){\r\n      text += ` ${e.nameVariation}: ${e.nameOption}\\n`\r\n      return\r\n    }\r\n\r\n\r\n    let multiples = ''\r\n    \r\n    e.multipleOptions?.forEach(e => {\r\n      multiples += ` \\n - ${e.nameOption} ${this.formatNumber(e.price)}`\r\n    })\r\n\r\n    text += ` ${e.nameVariation}:${multiples}`\r\n    return\r\n\r\n  })\r\n\r\n  return text.toLocaleUpperCase()\r\n}\r\n\r\ngetOptionType1(product:ProductCart){\r\n  return product.userOptions.find(o => o.typePrice === 1) || null\r\n}\r\n  \r\ngenIdOrder(): string {\r\n    let codigo = '';\r\n    const caracteres =\r\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n    const longitud = 5;\r\n    for (let i = 0; i < longitud; i++) {\r\n      codigo += caracteres.charAt(\r\n        Math.floor(Math.random()*caracteres.length)\r\n      );\r\n    }\r\n  return codigo;\r\n}\r\n\r\n\r\nredirectWp(encodedText:string, phone:number){\r\n\r\n  window.open(`https://api.whatsapp.com/send?phone=+${phone}&text=${encodedText}`)\r\n\r\n}\r\n\r\nclearMessage(){\r\n  this.products = ''\r\n}\r\n\r\n\r\nformatUbicationName(userData:any,ubication:any){\r\n\r\n  return `${ubication.streetName} ${ubication.streetNumber ? ubication.streetNumber : userData.streetNumber}, ${ubication.localName ? ubication.localName : ubication.countrySecondarySubdivision }, ${ubication.countrySubdivision ? ubication.countrySubdivision : ubication.country}`\r\n}\r\n\r\n\r\n\r\n\r\nformatNumber(n:number){\r\n  return Intl.NumberFormat('es-AR', {style:'currency', currency:'ARS', minimumFractionDigits: 0}).format(n)\r\n}\r\n\r\n}","<div class=\"checkout h-full\">\r\n\r\n  <div class=\"container-title d-flex px-2 py-3 gap-2\">\r\n    <button (click)=\"location.back()\" class=\"chip border-round bg-bluegray-800 cursor-pointer hover:bg-black-alpha-90\">\r\n      <i class=\"pi pi-chevron-left text-white\" style=\"margin-top: 2px;\"></i>\r\n    </button>\r\n\r\n    <h2 [style.color]=\"theme.get('colorTextSecondary')\" [style.background]=\"theme.get('backgroundSec')\"\r\n      class=\"chip title-cart w-full\">Checkout</h2>\r\n  </div>\r\n\r\n  <div class=\"overflow-y-auto px-2\">\r\n\r\n    <form [formGroup]=\"form\" class=\"p-1\" *ngIf=\"localService.local$ | async as local\">\r\n\r\n      <div class=\"mb-2\">\r\n        <label class=\"text-base font-bold mb-1\">Nombre completo <span class=\"text-red-500\">*</span></label>\r\n        <mat-form-field class=\"mt-1 w-full\" color=\"primary\" appearance=\"outline\">\r\n          <input placeholder=\"Ingresa tu nombre completo\" type=\"text\" matInput formControlName=\"name\" />\r\n          <mat-error>{{setErrorsMessage('name')}}</mat-error>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n\r\n\r\n      <div class=\"mb-3\" *ngIf=\"local.shipping?.delivery || local.shipping?.pick_in_local\">\r\n        <label class=\"text-base font-bold mb-1\">Metodo de entrega <span class=\"text-red-500\">*</span></label>\r\n\r\n        <div class=\"d-flex gap-3 mt-1\">\r\n          <div class=\"box-select w-8rem p-2 border-round border-1 font-bold text-center\" [ngStyle]=\"{background:selectShippingMethod() === method ? '#0c183a' : '#fff'}\" [class.text-white]=\"selectShippingMethod() === method\" *ngFor=\"let method of localService.getShippingMethods(local)\" (click)=\"selectShippingMethod(method)\">\r\n            {{method}}\r\n          </div>\r\n      </div>\r\n      \r\n        <div class=\"h-1rem pt-1 \">\r\n          <span [@fadeIn] class=\" px-2 gap-1 d-flex roboto text-gray-800 text-sm\" *ngIf=\"form.get('shippingMethod')?.value === 'Buscar en el local'\"><i class=\"pi pi-map-marker\"></i>  {{local.location}}</span>\r\n          <span [@fadeIn] class=\" px-3 block error-checkout\" *ngIf=\"form.get('shippingMethod')?.invalid && formSubmitted\">Este campo es requerido</span>\r\n        </div>\r\n\r\n        <span [@fadeIn] *ngIf=\"ubicationUser && form.get('shippingMethod')?.value === 'Envio a domicilio' && costShipping !== -1\" class=\"font-bold block w-fit p-2 border-round bg-white text-base border-1\">\r\n          <span *ngIf=\"costShipping! > 0; else outOfRange\">\r\n            Costo de envio: ${{costShipping}}\r\n          </span>\r\n\r\n          <ng-template #outOfRange>\r\n            <div >\r\n              <span class=\"d-flex gap-1\">\r\n                <i class=\"pi pi-info-circle\"></i>\r\n                Tu ubicacion se encuentra fuera de la zona de entrega\r\n              </span>\r\n  \r\n              <span class=\"d-flex font-normal\">\r\n                <mat-checkbox color=\"primary\" formControlName=\"defineCostShipping\"></mat-checkbox>\r\n                Definire el costo de envio con el vendedor\r\n              </span>\r\n              \r\n            </div>\r\n           \r\n          </ng-template>\r\n        </span>\r\n\r\n      </div>\r\n\r\n\r\n\r\n      <div class=\"\" *ngIf=\"form.controls['shippingMethod'].value === 'Envio a domicilio' \">\r\n        <div class=\"mb-2\">\r\n          <label class=\"text-base font-bold mb-1 block \">Dirección</label>\r\n          <div class=\"d-flex gap-2 relative\">\r\n            <div class=\"block w-full relative\">\r\n              <label class=\"font-semibold mb-1 text-sm\">Calle <span class=\"text-red-500\">*</span></label>\r\n              <mat-form-field appearance=\"outline\" class=\"w-full\" color=\"primary\">\r\n                <input (blur)=\"getDirection()\"  placeholder=\"Ingresa tu dirección\"\r\n                  type=\"text\" matInput formControlName=\"direction\" />\r\n                <!-- <mat-error>{{setErrorsMessage('direction')}}</mat-error> -->\r\n              </mat-form-field>\r\n              \r\n              <i *ngIf=\"isInputIvalid('direction')\" [@fadeIn] class=\"error-icon absolute pi pi-info-circle\"></i>\r\n            </div>\r\n\r\n            <div class=\"w-3 relative\">\r\n              <label class=\"font-semibold mb-1 text-sm\">Numero <span class=\"text-red-500\">*</span></label>\r\n              <mat-form-field appearance=\"outline\" class=\"w-full\" color=\"primary\">\r\n                <input (blur)=\"getDirection()\" formControlName=\"streetNumber\" placeholder=\"Nro\" type=\"number\" matInput />\r\n              </mat-form-field>\r\n              <i *ngIf=\"isInputIvalid('streetNumber')\" [@fadeIn] class=\"error-icon absolute pi pi-info-circle\"></i>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"relative\" style='top:-25px' >\r\n          <div [@fadeIn] class=\"ubication-user mt-2 py-2\" *ngIf=\"ubicationUser\">\r\n            <div class=\"d-flex justify-content-between gap-2 font-medium\">\r\n              <div class=\"d-flex gap-2\">\r\n                <i class=\"pi pi-map-marker text-xl\" [ngStyle]=\"{color:theme.get('background')}\"></i>\r\n\r\n                <div>\r\n                  <span class=\"font-bold\"> {{ubicationUser.address?.streetName}}</span>\r\n                  <span class=\"\" *ngIf=\"ubicationUser.address?.streetNumber\"> {{ubicationUser.address?.streetNumber}}</span>\r\n                  <span class=\"\" *ngIf=\"ubicationUser.address?.localName && ubicationUser.address?.localName !== ubicationUser.address?.countrySubdivision\">, {{ubicationUser.address?.localName}}</span>\r\n                  <span class=\"\" *ngIf=\"ubicationUser.address?.countrySubdivision\">, {{ubicationUser.address?.countrySubdivision}}</span>\r\n                  <span class=\"\">, {{ubicationUser.address?.country}} </span>\r\n                </div>\r\n              </div>\r\n\r\n              <i class=\"pi pi-times text-xl\" (click)=\"removeUbication()\" (click)=\"enableDirectionInputs()\" [ngStyle]=\"{color:theme.get('background')}\"></i>\r\n\r\n            </div>\r\n          </div>\r\n\r\n            <ul *ngIf=\"suggestions && panelSuggestions && !ubicationUser\"  class=\"suggestions relative border-round overflow-y-auto z-2 mt-1 mb-2\">\r\n              <li class=\"p-2\">\r\n                <span *ngIf=\"suggestions.length\">\r\n                  Selecciona tu dirección{{suggestions.length > 1 ? ', encontramos multiples resultados' : ''}}\r\n                </span>\r\n\r\n                <span *ngIf=\"!suggestions.length\">\r\n                  No se encontraron resultados\r\n                </span>\r\n              </li>\r\n              <li (click)=\"selectDirection(suggestion)\" class=\"cursor-pointer text-overflow-ellipsis overflow-hidden text-nowrap p-2 border-bottom-1 border-800 text-sm hover:bg-white hover:text-black-alpha-90\" matRipple\r\n                *ngFor=\"let suggestion of suggestions\">\r\n                <i class=\"pi pi-map-marker\"></i>\r\n                <span class=\"font-bold\"> {{suggestion.address?.streetName}}</span>\r\n                <span class=\"\" *ngIf=\"suggestion.address?.streetNumber\"> {{suggestion.address?.streetNumber}}</span>\r\n                <span class=\"\" *ngIf=\"suggestion.address?.localName && suggestion.address?.localName !== suggestion.address?.countrySubdivision\">, {{suggestion.address?.localName}}</span>\r\n                <span class=\"\" *ngIf=\"suggestion.address?.countrySubdivision\">, {{suggestion.address?.countrySubdivision}}</span>\r\n                <span class=\"\">, {{suggestion.address?.country}}</span>\r\n              </li>\r\n            </ul>\r\n\r\n            <span class=\"font-sm mt-1 px-3 block error-checkout\"  *ngIf=\"!ubicationUser && panelSuggestions && suggestions\">Es necesario que selecciones una dirección de la lista</span>\r\n\r\n            <div matRipple class=\"cursor-pointer bg-white border-1 border-round border-500 mt-2 p-2\" (click)=\"displayMapView()\">\r\n              <span class=\"\">No encuentras tu dirección? <span [ngStyle]=\"{color:theme.get('backgroundSec')}\" class=\"font-bold\">Ubícate en el mapa </span></span>\r\n            </div>\r\n\r\n          </div>\r\n\r\n\r\n        <label class=\"text-base font-bold mb-1\">Referencia de la casa (opcional)</label>\r\n        <mat-form-field appearance=\"outline\" class=\"w-full mb-1 mt-1\">\r\n          <textarea formControlName=\"reference\" matInput placeholder=\"Ej. Casa color rojo, porton de madera\"></textarea>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n\r\n      <div class=\"mb-3\" *ngIf=\"local.pay_methods\">\r\n        <label class=\"text-base font-bold mb-1\">Metodo de pago <span class=\"text-red-500\">*</span></label>\r\n        <div class=\"d-flex gap-3 mt-1\">\r\n          <div class=\"\" *ngFor=\"let method of localService.getPayMethods(local)\" (click)=\"selectPayMethod(method)\">\r\n            <div class=\"box-select w-8rem p-2 border-round border-1 font-bold text-center\" [ngStyle]=\"{background:selectPayMethod() === method ? '#0c183a' : '#fff'}\" [class.text-white]=\"selectPayMethod() === method\" >\r\n              {{method}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <p [@fadeIn] class=\"text-sm px-2 border-left-2 mt-1 roboto text-gray-800\" *ngIf=\"this.form.controls['payMethod'].value === 'Transferencia'\">\r\n          Le indicaremos el destino de la transferencia una vez realizado el pedido\r\n        </p>\r\n\r\n        <div class=\"h-1rem pt-1\">\r\n          <span class=\"font-sm mt-1 px-3 block error-checkout\" [@fadeIn] *ngIf=\"form.get('payMethod')?.invalid && formSubmitted\">Este campo es requerido</span>\r\n        </div>\r\n          \r\n      </div>\r\n\r\n\r\n\r\n      <div class=\"\" *ngIf=\"this.form.controls['payMethod'].value === 'Efectivo'\r\n      && this.form.controls['shippingMethod'].value === 'Envio a domicilio'\">\r\n\r\n        <label class=\"text-base font-bold mb-1\">Con cuanto pagará (opcional)</label>\r\n        <mat-form-field class=\"mt-1 w-full\" color=\"primary\">\r\n          <input type=\"number\" matInput formControlName=\"amountReceived\" />\r\n          <span matTextPrefix>$&nbsp;</span>\r\n          <span matTextSuffix>.00</span>\r\n          <mat-error>El monto ingresado es menor al subtotal</mat-error>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n\r\n    </form>\r\n  </div>\r\n\r\n\r\n  <div class=\"p-2 pb-3\">\r\n\r\n    <div class=\"container-details px-2 mb-2\">\r\n      <p class=\"details-checkout px-2 text-base subtotal\"><b>Subtotal:</b> <span\r\n          class=\"text-xl font-bold\">{{subtotal|currency}}</span> </p>\r\n      <p *ngIf=\"costShipping! > 0\" class=\"details-checkout px-2 text-base\">\r\n        <b>Envio:</b>\r\n\r\n        <span class=\"text-xl font-bold\">{{costShipping|currency}}</span> \r\n    </div>\r\n\r\n    <button matRipple (click)=\"preLeave()\" class=\"w-full chip border-round font-bold text-white\"\r\n      [style.background]=\"theme.get('background')\" type=\"submit\">\r\n      Enviar\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div *ngIf=\"loadMap\" class=\"fixed bg-white display-map mx-auto left-0 top-0 w-full h-full flex flex-column\">\r\n\r\n  <header class=\"d-flex justify-content-between p-3 border-bottom-1 border-500\">\r\n    <span class=\"text-xl font-medium\">Ubicate en el mapa</span>\r\n\r\n    <div class=\"d-flex\">\r\n      <button (click)=\"saveMarker()\" class=\"mr-4\">GUARDAR</button>\r\n      <button (click)=\"loadMap = false\">\r\n        <i class=\"pi pi-times\"></i>\r\n      </button>\r\n    </div>\r\n\r\n  </header>\r\n\r\n  <div class=\"p-3 h-full w-full\">\r\n    <ol style=\"list-style: decimal;\" class=\"pb-3 pl-3\">\r\n      <li>Buscá tu ubicación en el mapa.</li>\r\n      <li>Selecciona para colocar un marcador.</li>\r\n      <li>Guarda la dirección con el botón \"GUARDAR\".</li>\r\n    </ol>\r\n\r\n    <div id=\"mapContainer\" class=\"w-full h-full\">\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>","import {\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { CartService } from 'src/app/services/cartData/cart.service';\r\nimport { ThemesService } from 'src/app/services/themes/themes.service';\r\nimport { UserService } from 'src/app/services/userData/user.service';\r\nimport { WpService } from 'src/app/services/wpService/wp.service';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { LocalDataService } from 'src/app/services/localData/local-data.service';\r\nimport { Location } from '@angular/common';\r\nimport { Local } from 'src/app/interfaces/local-interface';\r\nimport { minValueValidator } from 'src/app/utils/validators';\r\nimport { TomtomService } from 'src/app/services/tomtom-service/tomtom.service';\r\nimport { FuzzySearchResult, LatLng } from '@tomtom-international/web-sdk-services';\r\n\r\nimport {\r\n  LngLat,\r\n  MapMouseEvent,\r\n  Marker,\r\n  NavigationControl,\r\n} from '@tomtom-international/web-sdk-maps';\r\nimport { fadeIn } from 'src/app/animations/main-detail-animations';\r\n\r\n@Component({\r\n  selector: 'app-checkout',\r\n  templateUrl: './checkout.component.html',\r\n  styleUrls: ['./checkout.component.scss'],\r\n  animations:[fadeIn]\r\n})\r\nexport class CheckoutComponent implements OnInit {\r\n  form: FormGroup;\r\n  userData: any = this.userService.getUser();\r\n  local?: Local;\r\n  cartItems: any[] = [];\r\n  subtotal: number = 0;\r\n  confirmLeave: boolean = false;\r\n  formSubmitted:boolean = false\r\n\r\n  map?: any;\r\n  suggestions?: FuzzySearchResult[];\r\n  panelSuggestions: boolean = false;\r\n  @ViewChild('mapContainer') mapContainer?: ElementRef;\r\n  loadMap: boolean = false;\r\n  currentMarker?:Marker\r\n  cordsUser?:LngLat\r\n  ubicationUser?:FuzzySearchResult\r\n  previusDirection?:string\r\n  previusStreetNumber?:number\r\n  costShipping?:number \r\n\r\n  constructor(\r\n    public theme: ThemesService,\r\n    private formBuilder: FormBuilder,\r\n    private userService: UserService,\r\n    private cartService: CartService,\r\n    private wpService: WpService,\r\n    private matDialog: MatDialog,\r\n    private snackBar: MatSnackBar,\r\n    public localService: LocalDataService,\r\n    public location: Location,\r\n    private tomtom: TomtomService\r\n  ) {\r\n    this.cartService.getCartItems().subscribe((items: any[]) => {\r\n      console.log(items);\r\n\r\n      this.cartItems = items;\r\n\r\n      this.subtotal = items\r\n        .map((e) => e.total * e.quantity)\r\n        .reduce((p, c) => p + c);\r\n    });\r\n\r\n    this.form = this.formBuilder.group({\r\n      name: ['', Validators.required],\r\n      payMethod: [null],\r\n      shippingMethod: [null],\r\n      direction: [null],\r\n      streetNumber:[null],\r\n      amountReceived: [null, [minValueValidator(this.subtotal)]],\r\n      reference: [null],\r\n      defineCostShipping:[false]\r\n    });\r\n\r\n    this.localService.local$.subscribe((local) => {\r\n      if (!local) return;\r\n      this.local = local;\r\n      this.setLocalConfig(local);\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setFormStates()\r\n\r\n  //  this.userService.getGeolocation().subscribe(location=>{\r\n  //    console.log(location);\r\n  //    this.tomtom.reverseSearch({lng:location.longitude, lat:location.latitude}).then(res=>{\r\n  //    console.log(res);\r\n  //    this.ubicationUser = res['addresses'][0]\r\n  //    this.tomtom.calculateRoute({lng:-65.00505,lat:\r\n  //      -31.743643}).subscribe(route=>{\r\n  //      console.log(route);\r\n\r\n  //    })\r\n  //  })\r\n\r\n  //  })\r\n  }\r\n\r\n  setErrorsMessage(control: string) {\r\n    return this.form.controls[control].hasError('required')\r\n      ? 'Este campo es requerido'\r\n      : '';\r\n  }\r\n\r\n  formChange() {\r\n    const userData = {\r\n      name: this.form.controls['name'].value,\r\n      direction: this.form.controls['direction'].value,\r\n      reference: this.form.controls['reference'].value,\r\n    };\r\n\r\n    this.userService.saveUserShipping(userData);\r\n  }\r\n\r\n  preLeave() {\r\n    console.log(this.form);\r\n\r\n    if (this.isFormInvalid()) {\r\n      this.isFormInvalid(true)\r\n\r\n      this.formSubmitted = true\r\n      this.form.markAllAsTouched();\r\n      return;\r\n    }\r\n\r\n    this.redirectWhatsapp();\r\n  }\r\n\r\n  redirectWhatsapp() {\r\n    const encodedText = this.wpService.generarMensaje(\r\n      this.cartItems,\r\n      {...this.form.value, ubication:this.ubicationUser, costShipping:this.costShipping},\r\n      this.subtotal\r\n    );\r\n    console.log(encodedText);\r\n      this.localService.postSale(this.local!.id, this.subtotal)\r\n\r\n    this.wpService.redirectWp(\r\n      encodedText,\r\n      this.localService.getSessionLocal().phone\r\n    );\r\n  }\r\n\r\n  setLocalConfig(local: Local) {\r\n    console.log(local.pay_methods);\r\n    const payMethods = local.pay_methods;\r\n    const shippingMethods = local.shipping;\r\n\r\n    if (payMethods?.transfer || payMethods?.cash) {\r\n      this.form.get('payMethod')?.addValidators(Validators.required);\r\n    }\r\n\r\n    if (shippingMethods?.delivery || shippingMethods?.pick_in_local) {\r\n      this.form.get('shippingMethod')?.addValidators(Validators.required);\r\n    }\r\n  }\r\n\r\n  async getDirection(query?:string) {\r\n\r\n    if (!this.directionIsChange() ) {\r\n      console.log('Invalid');\r\n      console.log(this.form);\r\n\r\n      return\r\n    }\r\n\r\n    this.suggestions = undefined;\r\n    this.previusDirection = this.form.controls['direction'].value\r\n    this.previusStreetNumber = this.form.controls['streetNumber'].value\r\n\r\n      if (this.ubicationUser) {\r\n        this.ubicationUser = undefined\r\n      }\r\n\r\n      if (this.form.get('direction')?.value.length < 2 || this.form.get('direction')?.invalid) {\r\n        return;\r\n      }\r\n\r\n      this.panelSuggestions = true\r\n      \r\n      this.suggestions = (await this.tomtom.getSuggestions(this.form.get('direction')?.value + ' ' + this.form.get('streetNumber')?.value)).results;\r\n  }\r\n\r\n  onBlurDirection() {\r\n    setTimeout(() => (this.panelSuggestions = false), 100);\r\n  }\r\n\r\n  selectDirection(suggestion: FuzzySearchResult) {\r\n    this.panelSuggestions = false\r\n    this.tomtom.calculateRoute(suggestion.position).subscribe(route=>{\r\n      const distanceToShipping =  this.tomtom.MetersToKilometers(route.routes[0].summary.lengthInMeters)\r\n      console.log(distanceToShipping);\r\n      \r\n      this.ubicationUser = suggestion\r\n      this.costShipping = this.localService.calculateShippingCost(distanceToShipping)\r\n      console.log(this.costShipping);\r\n      \r\n\r\n\r\n    })\r\n\r\n    this.cordsUser = undefined\r\n    // this.form.get('direction')?.setValue(suggestion.address?.streetName);\r\n  }\r\n\r\n  displayMapView() {\r\n    this.loadMap = true;\r\n\r\n    setTimeout(async () => {\r\n      this.map = await this.tomtom.getMap('mapContainer');\r\n\r\n      this.map.on('click', (event: MapMouseEvent<'click'>) => {\r\n        console.log(event);\r\n        const { lng, lat } = event.lngLat;\r\n\r\n        if(this.currentMarker){\r\n          this.currentMarker.remove()\r\n        }\r\n        this.currentMarker = this.tomtom.addMarker(lng, lat, this.map)\r\n\r\n\r\n      });\r\n\r\n      const navControl = new NavigationControl({\r\n        showZoom: true, // Mostrar control de zoom\r\n        showPitch: false, // No mostrar control de inclinación\r\n      });\r\n\r\n      this.map.addControl(navControl, 'top-right');\r\n\r\n    }, 100);\r\n\r\n  }\r\n\r\n  removeUbication(){\r\n    this.ubicationUser = undefined\r\n    this.panelSuggestions = true\r\n  }\r\n\r\n  saveMarker(cords?:LatLng){\r\n\r\n    if (!this.currentMarker) {\r\n      return\r\n    }\r\n\r\n    this.cordsUser = this.currentMarker.getLngLat()\r\n    this.ubicationUser = undefined\r\n    this.loadMap = false\r\n\r\n    this.tomtom.reverseSearch(this.cordsUser).then((res)=>{\r\n      \r\n      //SETEAR LAS CORDENADAS DEL LOCAL\r\n      this.tomtom.calculateRoute(res['addresses'][0].position).subscribe(route=>{\r\n        console.log(route.routes[0].summary.lengthInMeters);\r\n        \r\n        const distanceToShipping =  this.tomtom.MetersToKilometers(route.routes[0].summary.lengthInMeters)\r\n        console.log(distanceToShipping);\r\n        this.ubicationUser = res['addresses'][0]\r\n        this.costShipping = this.localService.calculateShippingCost(distanceToShipping)\r\n      })\r\n    })\r\n  }\r\n\r\n  selectShippingMethod(method?:string){\r\n    if (method) {\r\n      this.form.get('shippingMethod')?.setValue(method)\r\n    }\r\n\r\n    return this.form.get('shippingMethod')?.value\r\n  }\r\n\r\n  selectPayMethod(method?:string){\r\n\r\n    if (method) {\r\n      this.form.get('payMethod')?.setValue(method)\r\n    }\r\n\r\n    return this.form.get('payMethod')?.value\r\n\r\n  }\r\n\r\n\r\n    setFormStates(){\r\n      this.form.valueChanges.subscribe(() => this.formChange());\r\n\r\n      this.form.get('shippingMethod')?.valueChanges.subscribe((value) => {\r\n\r\n      if (value === 'Envio a domicilio') {\r\n        this.form.controls['direction'].setValidators(Validators.required);\r\n        this.form.controls['streetNumber'].setValidators(Validators.required);\r\n\r\n      } else {\r\n        this.form.controls['direction'].clearValidators();\r\n        this.form.controls['streetNumber'].clearValidators();\r\n      }\r\n        this.form.controls['streetNumber'].updateValueAndValidity();\r\n        this.form.controls['direction'].updateValueAndValidity();\r\n    });\r\n\r\n\r\n\r\n\r\n    // this.form.get('streetNumber')?.valueChanges.subscribe(value=>{\r\n    // })\r\n\r\n      // this.form.patchValue({\r\n      //   name: this.userData?.name,\r\n      //   direction: this.userData?.direction,\r\n      //   reference: this.userData?.reference,\r\n      // });\r\n    }\r\n\r\n\r\n    isInputIvalid(input:string){\r\n      return this.form.get(input)?.invalid && this.form.get(input)?.touched\r\n    }\r\n\r\n\r\n    directionIsChange(){\r\n\r\n      if(this.previusDirection === this.form.controls['direction'].value && this.previusStreetNumber === this.form.controls['streetNumber'].value){\r\n        return false\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n\r\n    enableDirectionInputs(){\r\n      this.form.get('direction')?.enable()\r\n      this.form.get('streetNumber')?.enable()\r\n    }\r\n\r\n\r\n    isFormInvalid(showAlerts?:boolean){\r\n      const shippingMethod = this.form.get('shippingMethod')?.value\r\n\r\n      if (this.form.invalid) {\r\n        showAlerts ? this.snackBar.open('Completar todos los campos requeridos', '' , {duration:3000}) : null\r\n        return true\r\n      }\r\n\r\n      if (shippingMethod === 'Envio a domicilio' && !this.ubicationUser){\r\n       showAlerts ? this.snackBar.open('Ingresa una direccion valida', '' , {duration:3000}) : null\r\n        return true\r\n      }\r\n\r\n      if (shippingMethod === 'Envio a domicilio' && !this.costShipping && !this.form.get('defineCostShipping')?.value) {\r\n       showAlerts ? this.snackBar.open('Tu ubicacion se encuentra fuera de la zona de entrega', '' , {duration:3000}) : null\r\n        return true\r\n      }\r\n\r\n\r\n\r\n      return false\r\n    }\r\n\r\n\r\n\r\n    \r\n}\r\n","<div class=\"container h-full\" *ngIf=\"themes.stateTheme | async as load\">\r\n  <div class=\"h-full \" *ngIf=\"load\">\r\n\r\n    <router-outlet></router-outlet>\r\n   \r\n  </div>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ThemeService } from 'ng2-charts';\r\nimport { fadeIn } from 'src/app/animations/main-detail-animations';\r\nimport { CartService } from 'src/app/services/cartData/cart.service';\r\nimport { LayoutStateService } from 'src/app/services/layoutState/layout-state.service';\r\nimport { LocalDataService } from 'src/app/services/localData/local-data.service';\r\nimport { RouteDataService } from 'src/app/services/routeData/route-data-service.service';\r\nimport { ThemesService } from 'src/app/services/themes/themes.service';\r\n\r\n@Component({\r\n  selector: 'app-main-cart',\r\n  templateUrl: './main-cart.component.html',\r\n  styleUrls: ['./main-cart.component.scss'],\r\n  animations:[\r\n    fadeIn\r\n  ]\r\n})\r\nexport class MainCartComponent implements OnInit, OnDestroy {\r\n  \r\n  constructor(private layoutState:LayoutStateService, public themes:ThemesService) {\r\n\r\n  }\r\n\r\n\r\n\r\n  \r\n  ngOnInit(): void {\r\n    this.layoutState.state.header=true\r\n    this.layoutState.state.navigation=false\r\n    this.layoutState.updateState()\r\n    \r\n  }\r\n  \r\n  ngOnDestroy(): void {\r\n    this.layoutState.state.header=true\r\n    this.layoutState.state.navigation=true\r\n    this.layoutState.updateState()\r\n    \r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CartItemsComponent } from './cart-items/cart-items.component';\r\nimport { CheckoutComponent } from './checkout/checkout.component';\r\nimport { MainCartComponent } from './main-cart/main-cart.component';\r\n\r\nconst routes: Routes = [\r\n      {\r\n        path: '',\r\n        component: MainCartComponent,\r\n        data: { animation: 'cart', page: 'cart' },\r\n        children:[\r\n          {\r\n            path:'',\r\n            component:CartItemsComponent,\r\n            data: { animation: 'cart', page: 'cart' },\r\n\r\n          },\r\n          {\r\n            path:'checkout',\r\n            component:CheckoutComponent,\r\n            data: { animation: 'cart', page: 'cart' },\r\n\r\n          }\r\n        ]\r\n\r\n      },\r\n    ]\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RoutesCartRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MainCartComponent } from './main-cart/main-cart.component';\r\nimport { RoutesCartRoutingModule } from './routes-cart-routing.module';\r\nimport { CartItemsComponent } from './cart-items/cart-items.component';\r\nimport { CheckoutComponent } from './checkout/checkout.component';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport  {MatDialogModule} from '@angular/material/dialog';\r\nimport { ModalInfoWpComponent } from './modal-info-wp/modal-info-wp.component'\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\n\r\n@NgModule({\r\n  declarations: [MainCartComponent, CartItemsComponent, CheckoutComponent, ModalInfoWpComponent],\r\n  imports: [\r\n    MatRippleModule,\r\n    CommonModule,\r\n    RoutesCartRoutingModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatDialogModule,\r\n    MatTooltipModule,\r\n    MatSnackBarModule,\r\n    MatCheckboxModule\r\n\r\n  ],\r\n})\r\nexport class CartModule {}\r\n"],"x_google_ignoreList":[]}